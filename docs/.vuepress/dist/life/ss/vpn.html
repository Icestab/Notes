<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>科学上网 | 个人杂记</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/image/f.ico">
    <meta name="description" content="Accept what was and what is, and you&#39;ll more positive energy to pursue what will be.">
    
    <link rel="preload" href="/assets/css/0.styles.b4c82722.css" as="style"><link rel="preload" href="/assets/js/app.549933da.js" as="script"><link rel="preload" href="/assets/js/2.8ec7856a.js" as="script"><link rel="preload" href="/assets/js/4.84193cfc.js" as="script"><link rel="prefetch" href="/assets/js/10.743f19ee.js"><link rel="prefetch" href="/assets/js/11.f35d8534.js"><link rel="prefetch" href="/assets/js/12.82065eb2.js"><link rel="prefetch" href="/assets/js/13.259b6ebd.js"><link rel="prefetch" href="/assets/js/14.1810b396.js"><link rel="prefetch" href="/assets/js/15.0a90799e.js"><link rel="prefetch" href="/assets/js/16.16775973.js"><link rel="prefetch" href="/assets/js/17.8fc77386.js"><link rel="prefetch" href="/assets/js/18.6bc6fd78.js"><link rel="prefetch" href="/assets/js/19.ab6849ba.js"><link rel="prefetch" href="/assets/js/20.8f67c846.js"><link rel="prefetch" href="/assets/js/3.25cc2e99.js"><link rel="prefetch" href="/assets/js/5.46b6901b.js"><link rel="prefetch" href="/assets/js/6.b1568c1b.js"><link rel="prefetch" href="/assets/js/7.01dbaa82.js"><link rel="prefetch" href="/assets/js/8.91e8a3c3.js"><link rel="prefetch" href="/assets/js/9.c235976c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4c82722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人杂记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/life/RM2100.html" class="nav-link">
  生活
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/html_css_js/html_css.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/study/literary/extract.html" class="nav-link">
  文学
</a></li><li class="dropdown-item"><!----> <a href="/study/questions/mysql_pass.html" class="nav-link">
  环境问题
</a></li></ul></div></div><div class="nav-item"><a href="http://flysch.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  岩夹
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Icestab/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/life/RM2100.html" class="nav-link">
  生活
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习" class="dropdown-title"><span class="title">学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习" class="mobile-dropdown-title"><span class="title">学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/html_css_js/html_css.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/study/literary/extract.html" class="nav-link">
  文学
</a></li><li class="dropdown-item"><!----> <a href="/study/questions/mysql_pass.html" class="nav-link">
  环境问题
</a></li></ul></div></div><div class="nav-item"><a href="http://flysch.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  岩夹
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/Icestab/Notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>生活</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/life/RM2100.html" class="sidebar-link">红米2100路由器刷机</a></li><li><a href="/life/ss/vpn.html" aria-current="page" class="active sidebar-link">科学上网</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_1、shadowsocks" class="sidebar-link">1、Shadowsocks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_1-1-ss介绍-维基百科" class="sidebar-link">1.1 SS介绍（维基百科）</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_1-2-ss搭建" class="sidebar-link">1.2 SS搭建</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_1-3-ss客服端" class="sidebar-link">1.3 SS客服端</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_1-4-ss服务端优化" class="sidebar-link">1.4 SS服务端优化</a></li></ul></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_2、vpn" class="sidebar-link">2、VPN</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_2-1-介绍" class="sidebar-link">2.1 介绍</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_2-2-协议选择" class="sidebar-link">2.2 协议选择</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_2-3-vpn搭建" class="sidebar-link">2.3 VPN搭建</a></li><li class="sidebar-sub-header"><a href="/life/ss/vpn.html#_2-4-vpn使用" class="sidebar-link">2.4 vpn使用</a></li></ul></li></ul></li><li><a href="/life/oh-my-zsh.html" class="sidebar-link">oh-my-zsh安装与基本配置</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="科学上网"><a href="#科学上网" class="header-anchor">#</a> 科学上网</h1> <p>大约3年前因为需要使用google接触了科学上网，当时非常流行ss代理，在一个网站购买了包月服务开启了外网之旅；后来有机会拥有香港服务器于是自己搭建了ss-server。</p> <p>本文大致分为三个部分，ss-server搭建、ss-server升级、vpn搭建。</p> <h2 id="_1、shadowsocks"><a href="#_1、shadowsocks" class="header-anchor">#</a> 1、Shadowsocks</h2> <h3 id="_1-1-ss介绍-维基百科"><a href="#_1-1-ss介绍-维基百科" class="header-anchor">#</a> 1.1 SS介绍（维基百科）</h3> <p><strong>Shadowsocks</strong>（简称<strong>SS</strong>）是一种基于<a href="https://www.tw.wiiaa.top/baike-SOCKS#SOCK5" target="_blank" rel="noopener noreferrer">Socks5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>代理方式的加密传输协议，也可以指实现这个协议的各种开发包。目前包使用<a href="https://www.tw.wiiaa.top/baike-Python" target="_blank" rel="noopener noreferrer">Python<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-C%E8%AA%9E%E8%A8%80" target="_blank" rel="noopener noreferrer">C<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-C%2B%2B" target="_blank" rel="noopener noreferrer">C++<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-C%E2%99%AF" target="_blank" rel="noopener noreferrer">C#<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-Go%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">Go语言<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-Rust" target="_blank" rel="noopener noreferrer">Rust<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等编程语言开发，大部分主要实现（<a href="https://www.tw.wiiaa.top/baike-IOS" target="_blank" rel="noopener noreferrer">iOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>平台的除外）采用<a href="https://www.tw.wiiaa.top/baike-Apache%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="noopener noreferrer">Apache许可证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-GPL" target="_blank" rel="noopener noreferrer">GPL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://www.tw.wiiaa.top/baike-MIT%E8%A8%B1%E5%8F%AF%E8%AD%89" target="_blank" rel="noopener noreferrer">MIT许可证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>等多种<a href="https://www.tw.wiiaa.top/baike-%E8%87%AA%E7%94%B1%E8%BB%9F%E9%AB%94" target="_blank" rel="noopener noreferrer">自由软件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>许可协议<a href="https://www.tw.wiiaa.top/baike-%E9%96%8B%E6%94%BE%E5%8E%9F%E5%A7%8B%E7%A2%BC" target="_blank" rel="noopener noreferrer">开放源代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。Shadowsocks分为服务器端和客户端，在使用之前，需要先将服务器端程序部署到服务器上面，然后通过客户端连接并创建本地代理。</p> <p>在中国大陆，本工具广泛用于突破<a href="https://www.tw.wiiaa.top/baike-%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E" target="_blank" rel="noopener noreferrer">防火长城<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（GFW），以浏览被封锁、遮蔽或干扰的内容。2015年8月22日，Shadowsocks原作者Clowwindy称受到了<a href="https://www.tw.wiiaa.top/baike-%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E7%BD%91%E7%BB%9C%E5%AE%A1%E6%9F%A5" target="_blank" rel="noopener noreferrer">中华人民共和国政府的压力<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，宣布停止维护此计划（项目）并移除其个人页面所存储的源代码[<a href="https://www.tw.wiiaa.top/wiki/Shadowsocks#cite_note-4" target="_blank" rel="noopener noreferrer">4]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>[<a href="https://www.tw.wiiaa.top/wiki/Shadowsocks#cite_note-effchinacoder-5" target="_blank" rel="noopener noreferrer">5]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>为了避免<a href="https://www.tw.wiiaa.top/baike-%E5%85%B3%E9%94%AE%E8%AF%8D%E8%BF%87%E6%BB%A4" target="_blank" rel="noopener noreferrer">关键词过滤<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，网民会根据<a href="https://www.tw.wiiaa.top/baike-%E8%AB%A7%E9%9F%B3_(%E8%AA%9E%E8%A8%80%E5%AD%B8)" target="_blank" rel="noopener noreferrer">谐音<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>将ShadowsocksR称为“酸酸乳”[<a href="https://www.tw.wiiaa.top/wiki/Shadowsocks#cite_note-6" target="_blank" rel="noopener noreferrer">注 1]<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（SSR），将Shadowsocks称为“酸酸”（SS）。另外Shadowsocks的标志为纸飞机，而专门提供Shadowsocks或类似软件（如V2Ray）服务器的网站也被称为“机场”。</p> <h3 id="_1-2-ss搭建"><a href="#_1-2-ss搭建" class="header-anchor">#</a> 1.2 SS搭建</h3> <h4 id="_1-2-1-快速搭建"><a href="#_1-2-1-快速搭建" class="header-anchor">#</a> 1.2.1 快速搭建</h4> <p>目前这个项目在github上仍然能够搜到<a href="https://github.com/shadowsocks" target="_blank" rel="noopener noreferrer">点击前往<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，不够原作者已经没有维护了，基于Python的版本也停留在了2017年，但是由于Python安装简单所以也是一个不错的选择，大致流程如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> python3-pip
pip3 <span class="token function">install</span> --upgrade pip pip3 <span class="token function">install</span> setuptools
pip3 <span class="token function">install</span> shadowsocks
yum <span class="token function">install</span> python-m2crypto
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>安装完毕后新建一个配置文件启动即可：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vim</span> /etc/shadowsocks.json
<span class="token punctuation">{</span><span class="token string">&quot;server&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0.0.0.0&quot;</span>,
<span class="token string">&quot;server_port&quot;</span>:1234, <span class="token comment">#监听端口</span>
<span class="token string">&quot;password&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;xxx&quot;</span>, <span class="token comment">#密码</span>
<span class="token string">&quot;timeout&quot;</span>:300,
<span class="token string">&quot;method&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;aes-256-cfb&quot;</span>, <span class="token comment">#加密协议</span>
<span class="token string">&quot;fast_open&quot;</span>:true <span class="token comment">#是否启用fast_open建议开启</span>
<span class="token punctuation">}</span>
systemctl start shadowsocks
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果有防火墙放行对应的端口即可。</p></div> <h4 id="_1-2-2-shadowsocks-libev"><a href="#_1-2-2-shadowsocks-libev" class="header-anchor">#</a> 1.2.2  shadowsocks-libev</h4> <p>我个人使用的是这个版本，最新<strong>v3.3.5</strong>上次更新2020年9月，算是比较新的，而且网上也能下载到一键搭建脚本，使用比较方便。</p> <p>第一次搭建使用的脚本为<a href="/ss/shadowsocks-libev-old.sh">shadowsocks-libev.sh</a>,安装脚本提示一步一步进行就可以了，可以说是非常简单，在使用大约两年后想起升级，于是再次运行这个脚本，虽然ss-server版本升级了，但是客服端却无法连接了；在细心阅读脚本文件后任然找不到原因。</p> <p>于是乎去网上找了另外一个安装脚本<a href="/ss/centos-shadowsocks-libev.sh">centos-shadowsocks-libev.sh</a></p> <p>在执行前需要卸载原版本，方法很简单<code>./shadowsocks-libev.sh uninstall</code>提示是否卸载，输入y即可。</p> <p>给新脚本添加执行权限，然后直接运行，详细操作如下：</p> <p>1、提示设置SS密码，输入自定义密码后按回车，也可以直接按回车使用默认密码</p> <p><img src="data:image/png;base64,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" alt="1"></p> <p>2、接下来选择SS要使用的服务器端口，输入自己喜欢的端口， 也可以直接按回车使用默认端口</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlQAAAAxCAMAAAAr4MfbAAAAkFBMVEUAAAAzgMXl5eXlxYAzAADl5cWAMwAAM4DFxYAAXKMAADOAxeWjXAAAAFyj5eXFgDPlo1yj5aNcAABco+XF5eXF5aMAXICAxcWjxYCAo+Xl5aOAgKMzXKOjo6Oj5cWAo4BcM4BcgIAzADPF5cXFxaOjxeUzM4CjxcXFxcWAM1yjo1yjgDPlo6Nco8Wjo8WAxaOraimWAAAEiElEQVR42u2aiVbbOhCGI980xo65cmPubQvd973v/3adNRNhEAfKoSH834HIGo9kWfktycosAAAAAAAAAAAAAAAAAABwTVLT/LNc/H1S82i1qNAenW9lF+2ul6vcdL8e1OVyuqYZFtfn+N8mLx4cXUOMfHBDUaU/67Sy+PHjDX3elai0cN2l9ExNoZGJu65fNw09CpYs2hP2sdyf98+9hDurX+c9EVX7336LqmxvItv/q/7JijOWHD/l/hwodzv9cy+RzupGO5AnLMsjyNnET5sbFc+1R8/onA50pxt36Z+cxTxqtShcQHLtCSXu+dyKC/54h0tUZm2xy3rV7PmCUimg3+Pxy5V6qlErHVgx/Zqyem4+/gzeQLs/rof7pSIqH1ZLUZkTRLUzUk1ZFhhEGmXc6F8t3ahYrj0ZyMU7zV3ki3OsFoMKqJckW8/5SFW6GN4WvaxVrZ4kJy0wDeL3WjzdKP9vlu3R23Xe1nJeKuzrDdw2cqDDoSIqUaFPf4MltpAaNPdgRVWsqajTpRs0376jx60wRo4SduHDMIb25vOLFBg92XrORVW6ONEWq5MTy1mBlGl46UbzjOtJ7v2HHLVcIKqyQMp0yENRTVSdSCmbjDRhCw+9lnuootLOclGdqMYSfeq08mi1NQqeo/nERRVGmQMCq0WxApaw52WiKlwcbYufs6o1F8nHTznl0pMSLf35dCOpTeiUlKLyAnoroijS1UWi8uJStfpEomrKloOoltKx8/GAjU64hKjCGDqwWiojVUVUpUsQ+hGXMmEZnH35Og3mGdez5k7jtpbqSOV3Ow1UV3VN9dRFNU8gqvg+ZVHRDXw80ffyjVcublQ3z4WoxjCWOrBaLlxThajG86IqXRxrS4jKFlOaWNWnm+l0Y57n11RLno30XHm9ck0Vd9t9f7ypv/1NMv11WWa6SNSI6Y+Z/C1u5GN5q0oN28yoeM5FRV0X5QodeC0Xvf25pxUvvuTCJZC2+GW96nj7M30nb/X87Y/XQHaOiZumJhDD7tvfKC0bZ/3UiWfsbGpnic2T1KjxIS/U74z26Gb7YHsCdtT3kXsuKrCPQFQAAAD2Cnuvnseg3Hl0TL++yWIY7CGyMaOb3/UYlC5+rqszd/GwEf/RuGuY0bafNV4EC6/DgfSjeumKDaNbF5VYY/PJD3/8zLxNyDk1gQOApKIfuiu9E2KmASYyfISTB7tcHdBSFVVE3aRsv6KxECfs6hwEyWIU5GjK8UOYnS1E5dq4OqDFz5aiiggRvU7/a7MV1SiX03JYW91vUo5Rw+I+XFR6oiqqeUBLXVQRE2LXoj82mB47iOog2B2pLO7DRZUoUxPV1QEtQVhNOlOW9RxZNSLlzEYqcADsrqlIHGUMyvVGqmuISq/QNYxVizXV4VC8/Wnch4tKA0wonpITzcdoUg9ouWz6s5gQcQnrG7m6lMf0dxD4PlXEfah+IgJGEgsUiWiVqwNaQhwRNmIxIaxUxae/lc6mENVBwAK6Kbe7W4kddXDrogIAogIAAAAAAAAAAAAAAAAAAABgL/gNR5lSh1Go8nwAAAAASUVORK5CYII=" alt="2"></p> <p>3、 然后选择加密方式（仅保留相对安全的加密方式），如果选择chacha20的话，就输入对应序号3，按回车继续</p> <p><img src="data:image/png;base64,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" alt="3"></p> <p>4、 安装完成后，会有如下图安装成功的提示，记住各项信息，在客户端连接时需要用到</p> <p><img src="data:image/png;base64,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" alt="4"></p> <p>至此SS服务端就安装完毕了，非常简单，脚本自动拉取最新版本，所有这次成功升级到了最新。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>安装完后配置文件在<code>/etc/shadowsocks-libev/config.json</code>,可自行修改配置。</p> <p>修改完成后<code>systemctl restart shadowsocks-libev.service</code>即可生效。</p></div> <p>目前有Go语言的版本，有兴趣朋友可以自行研究。</p> <h3 id="_1-3-ss客服端"><a href="#_1-3-ss客服端" class="header-anchor">#</a> 1.3 SS客服端</h3> <p>服务端搭建完毕后需要客户端配合使用，可以到<a href="https://github.com/shadowsocks" target="_blank" rel="noopener noreferrer">shadowsocks (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>找到对应的操作系统版本下载，不过为了方便我给出常用下载地址：</p> <p>安卓：<a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener noreferrer">Releases · shadowsocks/shadowsocks-android (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/5.2d1515f9.png" alt="5"></p> <p>一般安卓手机选择arm64即可。</p> <p>Windows：<a href="https://github.com/shadowsocks/shadowsocks-windows/releases" target="_blank" rel="noopener noreferrer">Releases · shadowsocks/shadowsocks-windows (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/6.9b0dc5ae.png" alt="6"></p> <p>选择第一个压缩包，解压后直接运行即可。</p> <p>macOS：<a href="https://github.com/shadowsocks/ShadowsocksX-NG/releases" target="_blank" rel="noopener noreferrer">Releases · shadowsocks/ShadowsocksX-NG (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>本人无mac，配置方式都差不多。</p> <p>下载安装后，填上服务器地址、端口号、密码、加密方式就能正常使用了，这里就不再赘述了。</p> <h3 id="_1-4-ss服务端优化"><a href="#_1-4-ss服务端优化" class="header-anchor">#</a> 1.4 SS服务端优化</h3> <p>目前SS可以使用算法加速，我现在使用的是<code>BBR</code>加速和<code>open_fast</code>,当然还有<code>kcptun</code>由于我目前使用已经很流畅了，就没有继续折腾了。</p> <p>开启<code>open_fast</code>很简单，第一章就提到了，可以自行返回查看。</p> <p>Google 开源了其 TCP BBR 拥塞控制算法，并提交到了 Linux 内核，从 4.9 开始，Linux 内核已经用上该算法，所有你的机器内核得大于4.9。</p> <p>如果不幸你低于这个版本，可以参考<a href="https://github.flysch.cn/study/centos7.html" target="_blank" rel="noopener noreferrer">Centos7 升级内核版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>升级。
开启后，可以用这个命令查看 BBR 状态：</p> <p><code>sysctl net.ipv4.tcp_available_congestion_control</code></p> <p>如果返回的结果里有 bbr 则说明你的 VPS 已经开启 BBR 加速：</p> <p><code>net.ipv4.tcp_available_congestion_control = reno cubic bbr</code></p> <p>这里我提供一键配置bbr脚本<a href="/ss/bbr.sh">点击下载</a>，按照提示运行即可。</p> <h2 id="_2、vpn"><a href="#_2、vpn" class="header-anchor">#</a> 2、VPN</h2> <h3 id="_2-1-介绍"><a href="#_2-1-介绍" class="header-anchor">#</a> 2.1 介绍</h3> <h6 id="pptp"><a href="#pptp" class="header-anchor">#</a> PPTP</h6> <p>PPTP(Point-to-Point Tunneling Protocol，点对点隧道协议)是由微软为了在拨号网络方面创建VPN而成立的一个团队开发而生，因此长期以来一直都是其企业内部的VPN标准协议。它也是一个通过搭配各种认证方法（通常是MS-CHAP v2）以提供安全性的VPN协议。因为PPTP协议作为一个在几乎所有有VPN能力的平台和设备上都可以无需安装额外软件而使用的标准，它至今仍然是企业和VPN供应商们的热门选择。同时，它有着低计算开销即可实现的优势（通俗地说就是运行速度很快）。</p> <ul><li>几乎所有平台都内置好了PPTP协议的VPN客户端</li> <li>非常易于搭建</li> <li>不够安全（弱势的MSCHAPv2依旧被广泛使用）</li> <li>绝对妥协于NSA</li></ul> <h6 id="l2tp-以及-l2tp-ipsec"><a href="#l2tp-以及-l2tp-ipsec" class="header-anchor">#</a> L2TP 以及 L2TP/IPsec</h6> <p>L2TP(Layer 2 Tunnel Protocol，第二层隧道协议)是一种协议本身不对通过的流量进行加密或实施保密措施的VPN协议。也正是因为这个原因，L2TP通常会结合IPsec加密套件（如下所述，类似于一种密码）来实现，以此提供安全性和隐私性。</p> <p>L2TP/IPsec已经被内置于所有现代化操作系统以及具有VPN功能的设置，同时它也如PPTP一般，操作简单、可快速搭建（实际上它与PPTP使用的设备通常也是相同的）。</p> <p>L2tp/IPsec会进行两次数据封装，这似乎会让速度慢下来。不过首先，它的加密解密行为发生在内核之中，其次LwTP/IPsec也允许多线程（OpenVPN并没有这个功能），这两点完全可以将两次数据封装造成的减速抵消掉，结果是L2TP在理论上会比OpenVPN更快。</p> <ul><li>通常公认其安全</li> <li>易于搭建</li> <li>适用于全部现代化平台</li> <li>较OpenVPN更快</li> <li>或许已经向NSA妥协了（但未被证实）</li> <li>或许被NSA故意削弱过（但未被证实）</li> <li>会跟限制性防火墙产生冲突</li></ul> <h6 id="openvpn"><a href="#openvpn" class="header-anchor">#</a> OpenVPN</h6> <p>OpenVPN可以说是一种崭新的开源技术，它使用了OpenSSL库和SSLv3/TLSv1协议，通过与其他的技术融为一体，来提供一个强大而可靠的VPN解决方案。</p> <ul><li>高度可配置性</li> <li>非常安全（如果使用了PFS完全正向加密，甚至对NSA都是安全的）</li> <li>可以绕过防火墙</li> <li>可以使用多种加密算法</li> <li>开源（因此可以很容易地去检查项目中的后门情况或者其他有可能被NSA修改过的地方）</li> <li>需要第三方软件</li> <li>安装过程比较繁琐</li> <li>尽管在努力改善对移动端设备的支持，缺还是不及桌面端的完善程度</li></ul> <h6 id="sstp"><a href="#sstp" class="header-anchor">#</a> SSTP</h6> <p>SSTP（Secure Socket Tunneling Protocol，安全套接字隧道协议）是微软在Windows Vista SP1时推出的，虽然它现在可用于Linux、RouterOS和SEIL，但是它极大程度上还是一种仅限Windows平台的协议（让它支持苹果设备的可能性等同于地狱里面出现了一个雪球）。</p> <ul><li>非常安全（这取决于加密方式，不过通常使用AES就非常强大了）</li> <li>完全集成到了Windows操作系统中（Windows Vista SP1, Windows 7, Windows 8）</li> <li>微软官方支持</li> <li>可以绕过大多数防火墙</li> <li>只有在Windows环境才能真正工作</li> <li>作为微软的专有标准，不能被独立核查出后门以及其他问题</li></ul> <h6 id="ikev2"><a href="#ikev2" class="header-anchor">#</a> IKEv2</h6> <p>IKEv2（Internet Key Exchange version 2，因特网密钥交换版本2）基于IPSec隧道协议，由微软和思科联合开发，并被兼并到了Windows7及以上版本中。</p> <p>IKEv2有着非常实用的自动重连特性，当用户暂时失去互联网连接（比如进出火车隧道）的时候，它会自动重新建立VPN连接。对于手机用户来说确实是喜大普奔。Ikev2能跑在几乎所有iOS定制的VPN应用上，为了那些使用苹果公司官方VPN API的人无需越狱来使用它（也正因为这些优势，能让VPN供应商能够很容易地把更新配置文件推送到使用VPN的用户或者应用程序上）。</p> <ul><li>比PPTP，SSTP和L2TP更快，它不涉及在点对点协议（Point-to-Point protocols，PPP）上的开销</li> <li>非常稳定 - 尤其是切换网络或者在短暂的网络连接丢失之后重新连接的时候</li> <li>非常安全 - 支持AES 128，AES 192，AES 256以及3DES加密算法</li> <li>易于安装和配置 - 至少在用户端是如此</li> <li>协议也支持黑莓的设备</li> <li>暂时还不支持很多的平台</li> <li>在服务器上搭建IKEv2相对来说很费劲，这也是很多问题的隐患所在 我们所对它的信任仅因为它进行了开源</li></ul> <h3 id="_2-2-协议选择"><a href="#_2-2-协议选择" class="header-anchor">#</a> 2.2 协议选择</h3> <p>PPTP是搭建最为简单，但也是最不推荐的一种，我个人比较钟爱L2TP/IPsec，这个协议目前几乎所有智能设备都内置了，不用下载客户端即可使用。</p> <p>有人肯定想问已经在SS稳定使用的情况下为什么还要搭建VPN，之所以会有这个需求，主要是因为SS在小米(MIUI)上有问题，主要体现在不稳定。</p> <p>开始我以为是软件问题，不过后面把路由器刷了潘多拉后由路由器SS代理仍然不稳定，而且仅我手里这台小米这样，我上一部iphone和我电脑都不存在这个问题。</p> <p>问题主要体现在打开代理无论pac模式还是全局模式，有概率无法代理APP流量，经常导致steam，google play等软件很长时间无法正常使用（非常抓狂）。</p> <p>想知道路由器刷固件的可以参考我另外一个<a href="https://github.flysch.cn/life/RM2100.html" target="_blank" rel="noopener noreferrer">文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_2-3-vpn搭建"><a href="#_2-3-vpn搭建" class="header-anchor">#</a> 2.3 VPN搭建</h3> <h4 id="_2-3-1-l2tp"><a href="#_2-3-1-l2tp" class="header-anchor">#</a> 2.3.1 L2TP</h4> <p>在开始我就要很不幸的告诉大家，我失败了，浪费了一天的时间，试了好几个文章的方法都无法正常连接，我选择放弃了。</p> <p>下面我给出我找到的文章，感兴趣的可以自行尝试。</p> <p><a href="https://www.cnblogs.com/fisherpau/p/11576552.html" target="_blank" rel="noopener noreferrer">CentOS7 搭建L2TP - 玉米花豆 - 博客园 (cnblogs.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/weixin_44621066/article/details/108285573?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.vipsorttest&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.vipsorttest" target="_blank" rel="noopener noreferrer">Centos7搭建L2TP与Win10连接测试_CodeSunShines-CSDN博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.0z.gs/soso/centos-pptp.html" target="_blank" rel="noopener noreferrer">腾讯云 CentOS 7.6 部署 pptp vpn - 飘在云端 (0z.gs)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>所有文章我都一步一步试的，配置文件都没问题，服务正常启动，端口都正常开放，但是无论手机还是电脑死活都连不上。</p></div> <h4 id="_2-3-2-ikev2"><a href="#_2-3-2-ikev2" class="header-anchor">#</a> 2.3.2 IKEv2</h4> <p>其实这个协议应该算是目前最好的，开始以为搭建会很麻烦，结果比昨天的L2TP还简单，一次成功。</p> <p>下面是详细操作步骤：</p> <p>1.安装strongswan</p> <p><code>yum install strongswan</code></p> <p>2.创建证书</p> <p><code>strongswan pki --gen --outform pem &gt; ca.key.pem</code></p> <p><code>strongswan pki --self --in ca.key.pem --dn &quot;C=CN, O=one, CN=one t CA&quot; --ca --lifetime 3650 --outform pem &gt; ca.cert.pem</code></p> <p><code>strongswan pki --gen --outform pem &gt; server.key.pem</code></p> <p><code>strongswan pki --pub --in server.key.pem --outform pem &gt; server.pub.pem</code></p> <p><code>strongswan pki --pub --in server.key.pem | strongswan pki --issue --lifetime 3601 --cacert ca.cert.pem --cakey ca.key.pem --dn &quot;C=CN, O=one, CN=one t CA&quot; --san=&quot;你的服务器公网ip&quot; --flag serverAuth --flag ikeIntermediate --outform pem &gt; server.cert.pem</code></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意最后一个代码替换自己服务器ip</p></div> <p>3.安装证书</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">cp</span> -r ca.key.pem /etc/strongswan/ipsec.d/private/
<span class="token function">cp</span> -r ca.cert.pem /etc/strongswan/ipsec.d/cacerts/
<span class="token function">cp</span> -r server.cert.pem /etc/strongswan/ipsec.d/certs/
<span class="token function">cp</span> -r server.pub.pem /etc/strongswan/ipsec.d/certs/
<span class="token function">cp</span> -r server.key.pem /etc/strongswan/ipsec.d/private/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>4.配置</p> <p><code>vim /etc/strongswan/ipsec.conf</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>config setup  
    <span class="token assign-left variable">uniqueids</span><span class="token operator">=</span>never <span class="token comment">#允许多个客户端使用同一个证书</span>
 
conn %default  <span class="token comment">#定义连接项, 命名为 %default 所有连接都会继承它</span>
    compress <span class="token operator">=</span> <span class="token function">yes</span> <span class="token comment">#是否启用压缩, yes 表示如果支持压缩会启用.</span>
    dpdaction <span class="token operator">=</span> <span class="token function">clear</span> <span class="token comment">#当意外断开后尝试的操作, hold, 保持并重连直到超时.</span>
    dpddelay <span class="token operator">=</span> 30s <span class="token comment">#意外断开后尝试重连时长</span>
    dpdtimeout <span class="token operator">=</span> 60s <span class="token comment">#意外断开后超时时长, 只对 IKEv1 起作用</span>
    inactivity <span class="token operator">=</span> 300s <span class="token comment">#闲置时长,超过后断开连接.</span>
    leftdns <span class="token operator">=</span> <span class="token number">8.8</span>.8.8,8.8.4.4 <span class="token comment">#指定服务端与客户端的dns, 多个用&quot;,&quot;分隔</span>
    rightdns <span class="token operator">=</span> <span class="token number">8.8</span>.8.8,8.8.4.4
 
conn IKEv2-BASE
    leftca <span class="token operator">=</span> <span class="token string">&quot;C=CN, O=one, CN=one t CA&quot;</span> <span class="token comment">#服务器端根证书DN名称，与 --dn 内容一致 </span>
    leftsendcert <span class="token operator">=</span> always <span class="token comment">#是否发送服务器证书到客户端</span>
    rightsendcert <span class="token operator">=</span> never <span class="token comment">#客户端不发送证书</span>
 
conn IKEv2-EAP  
    <span class="token assign-left variable">keyexchange</span><span class="token operator">=</span>ikev2       <span class="token comment">#默认的密钥交换算法, ike 为自动, 优先使用 IKEv2</span>
    <span class="token assign-left variable">left</span><span class="token operator">=</span>%any       <span class="token comment">#服务器端标识,%any表示任意  </span>
    <span class="token assign-left variable">leftid</span><span class="token operator">=</span> <span class="token number">0.0</span>.0.0     <span class="token comment">#服务器端ID标识，你的服务器公网ip  </span>
    <span class="token assign-left variable">leftsubnet</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0/0        <span class="token comment">#服务器端虚拟ip, 0.0.0.0/0表示通配.  </span>
    leftcert <span class="token operator">=</span> server.cert.pem     <span class="token comment">#服务器端证书  </span>
    <span class="token assign-left variable">leftauth</span><span class="token operator">=</span>pubkey     <span class="token comment">#服务器校验方式，使用证书  </span>
    <span class="token assign-left variable">right</span><span class="token operator">=</span>%any      <span class="token comment">#客户端标识，%any表示任意  </span>
    rightsourceip <span class="token operator">=</span> <span class="token number">20.1</span>.0.0/16    <span class="token comment">#客户端IP地址分配范围  </span>
    <span class="token assign-left variable">rightauth</span><span class="token operator">=</span>eap-mschapv2  <span class="token comment">#eap-md5#客户端校验方式#KEv2 EAP(Username/Password)   </span>
    <span class="token assign-left variable">also</span><span class="token operator">=</span>IKEv2-BASE
    eap_identity <span class="token operator">=</span> %any <span class="token comment">#指定客户端eap id</span>
    rekey <span class="token operator">=</span> no <span class="token comment">#不自动重置密钥</span>
    fragmentation <span class="token operator">=</span> <span class="token function">yes</span> <span class="token comment">#开启IKE 消息分片</span>
    auto <span class="token operator">=</span> <span class="token function">add</span>  <span class="token comment">#当服务启动时, 应该如何处理这个连接项. add 添加到连接表中.</span>
 
<span class="token comment">#ios 和 mac Psk连接，无需证书 (EAP账号密码及psk)</span>
<span class="token comment">#android Psk 连接，无需证书（XAUTH账户密码及psk）</span>
conn Android_Ios_Mac_XauthPSK
     <span class="token assign-left variable">keyexchange</span><span class="token operator">=</span>ikev1
     <span class="token assign-left variable">ike</span><span class="token operator">=</span>aes128-aes256-sha1-modp3072-modp2048,3des-sha1-md5-modp1024,aes256-sha512-modp4096,aes128-sha256-modp3072
     <span class="token assign-left variable">esp</span><span class="token operator">=</span>aes128-sha1,aes256-sha256_96,3des-sha1,aes256-sha1
     <span class="token assign-left variable">left</span><span class="token operator">=</span>%defaultroute
     <span class="token assign-left variable">leftauth</span><span class="token operator">=</span>psk
     <span class="token assign-left variable">leftsubnet</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0/0
     <span class="token assign-left variable">right</span><span class="token operator">=</span>%any
     <span class="token assign-left variable">rightauth</span><span class="token operator">=</span>psk
     <span class="token assign-left variable">rightauth2</span><span class="token operator">=</span>xauth
     <span class="token assign-left variable">rightsourceip</span><span class="token operator">=</span><span class="token number">20.1</span>.0.0/16
     <span class="token assign-left variable">auto</span><span class="token operator">=</span>add
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>5.修改配置</p> <p><code>vim /etc/strongswan/strongswan.conf</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>
charon <span class="token punctuation">{</span>
        load_modular <span class="token operator">=</span> <span class="token function">yes</span>
        i_dont_care_about_security_and_use_aggressive_mode_psk <span class="token operator">=</span> <span class="token function">yes</span>
        compress <span class="token operator">=</span> <span class="token function">yes</span>
        plugins <span class="token punctuation">{</span>
                 duplicheck<span class="token punctuation">{</span>
                            <span class="token assign-left variable">enable</span><span class="token operator">=</span>no
                 <span class="token punctuation">}</span>
                include strongswan.d/charon/*.conf
        <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span>
include strongswan.d/*.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>5.1查看日志（两种方法）</p> <p><code>1.journalctl -f -u strongswan</code></p> <p><code>2.tail -f /var/log/messages</code></p> <p>6.配置用户密码</p> <p>`vim /etc/strongswan/ipsec.secrets</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#使用证书验证时的服务器端私钥</span>
<span class="token comment">#格式 : RSA &lt;private key file&gt; [ &lt;passphrase&gt; | %prompt ]</span>
<span class="token builtin class-name">:</span> RSA server.key.pem
 
<span class="token comment">#使用预设加密密钥, 越长越好</span>
<span class="token comment">#格式 [ &lt;id selectors&gt; ] : PSK &lt;secret&gt;</span>
<span class="token builtin class-name">:</span> PSK <span class="token string">&quot;xxxxx&quot;</span>
 
<span class="token comment">#EAP 方式, 格式同 psk 相同 (用户名/密码 例：oneAA/oneTT)</span>
oneAA <span class="token builtin class-name">:</span> EAP <span class="token string">&quot;oneTT&quot;</span>
 
<span class="token comment">#XAUTH 方式, 只适用于 IKEv1</span>
<span class="token comment">#格式 [ &lt;servername&gt; ] &lt;username&gt; : XAUTH &quot;&lt;password&gt;&quot;</span>
oneAA <span class="token builtin class-name">:</span> XAUTH <span class="token string">&quot;oneTT&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>6.开始内核转发</p> <p><code>vim /etc/sysctl.conf</code></p> <p>修改：</p> <p><code>net.ipv4.ip_forward = 1</code></p> <p>如果开启了ipv6，那么也要把对应的改为1</p> <p>输入下面命令生效：</p> <p><code>sysctl -p</code></p> <p>添加upd端口</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>firewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">500</span>-4500/udp
firewall-cmd --permanent --add-masquerade
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>调整MTU-MSS、添加GRE，否则隧道失败：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>firewall-cmd --permanent --direct --add-rule ipv4 filter INPUT <span class="token number">0</span> -p gre -j ACCEPT
firewall-cmd --permanent --direct --add-rule ipv4 filter FORWARD <span class="token number">0</span> -p tcp -i eth0 -j TCPMSS --syn --set-mss <span class="token number">1299</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>8.配置防火墙</p> <p><code>vim /etc/firewalld/zones/public.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zone</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>short</span><span class="token punctuation">&gt;</span></span>Public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>short</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>For use in public areas. You do not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interface</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>eth0<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ssh<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dhcpv6-client<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipsec<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tcp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1723<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tcp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>47<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tcp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1701<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>port</span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tcp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>22<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>masquerade</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">family</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipv4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10.1.0.0/16<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>masquerade</span><span class="token punctuation">/&gt;</span></span>                                                                                                                                                                                    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">family</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipv4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10.1.0.0/16<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>forward-port</span> <span class="token attr-name">to-port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4500<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span> <span class="token attr-name">family</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipv4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10.1.0.0/16<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>forward-port</span> <span class="token attr-name">to-port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>udp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>masquerade</span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zone</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>9.开启防火墙和strongswan</p> <p><code>systemctl start firewalld</code></p> <p><code>systemctl start strongswan</code></p> <p>10.开放安全组端口</p> <p>不同云服务商操作方法不同，不过大体相似，参照云服务商文档开启UPD500和4500端口即可。</p> <h3 id="_2-4-vpn使用"><a href="#_2-4-vpn使用" class="header-anchor">#</a> 2.4 vpn使用</h3> <p>基本上系统都自带了IKEv2的协议的vpn</p> <p>将服务器<code>ca.cert.pem</code>导出到需要的设备上，ios和mac操作都很简单这里不演示，这里说明一下遇到困难的小米和windows。</p> <p>小米:</p> <p>系统自带IKEv2是个废品，无法使用，只能到strongswan官网下载软件使用。</p> <p><a href="https://download.strongswan.org/Android/?C=M;O=D" target="_blank" rel="noopener noreferrer">下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>选择最新版本即可。</p> <p>步骤：右上角选项--&gt;CA证书--&gt;再选择右上角选项--&gt;导入证书--&gt;找到ca.cert.pem点击即可。
回到主界面--&gt;添加配置--&gt;例：服务器地址：你的服务器公网ip
类型：IKEv2 EAP(用户名/密码)，填写用户名和密码
CA证书：选择刚才导入的ca.cert.pem证书
点击右上角--保存</p> <p>如果没有问题，这时就能正常连接使用了。</p> <p>windows:</p> <p>windows默认不支持DH2048_AES256协商协议,会导致正常导入证书后无法连接。</p> <p>解决办法：添加注册表项，不需要重启生效</p> <p><code>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Rasman\Parameters里新建类型为DWORD的NegotiateDH2048_AES256 键，值设置为1</code></p> <p>至此windows正常连接。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/3/2022, 3:46:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/life/RM2100.html" class="prev">
        红米2100路由器刷机
      </a></span> <span class="next"><a href="/life/oh-my-zsh.html">
        oh-my-zsh安装与基本配置
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.549933da.js" defer></script><script src="/assets/js/2.8ec7856a.js" defer></script><script src="/assets/js/4.84193cfc.js" defer></script>
  </body>
</html>
