(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{452:function(s,n,a){"use strict";a.r(n);var t=a(34),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ssh防止暴力破解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh防止暴力破解"}},[s._v("#")]),s._v(" SSH防止暴力破解")]),s._v(" "),a("p",[s._v("个人购买云服务器后防止被SSH暴力破解，应当做好毕业的安全措施。")]),s._v(" "),a("h2",{attrs:{id:"_1-修改默认端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改默认端口"}},[s._v("#")]),s._v(" 1.修改默认端口")]),s._v(" "),a("p",[s._v("ssh默认22端口，一般暴力扫描都是扫描22端口，所有修改为不常用的端口能有效防止被扫描。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#找到#Port22，将#去掉并添加端口Port xxx(自己设定)，注意是添加，保留两个端口确保另外一个不能使用的时候还可以用22，测试成功再去掉22")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启ssh服务")]),s._v("\nsystemctl restart sshd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入服务器-网络与安全-安全组-配置规则-添加安全组规则，将上面自定义的端口添加进去，如果服务器有开启防火墙的话(建立开启)，必须开放自定义端口")]),s._v("\nfirewall-cmd --zone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx/tcp --permanent\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启防火墙")]),s._v("\nsystemctl restart firewalld.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试成功后，只需进入配置文件将Port 22添加注释即可")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Port 22")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"_2-使用密钥登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用密钥登录"}},[s._v("#")]),s._v(" 2.使用密钥登录")]),s._v(" "),a("p",[s._v("禁止密码登录启用密钥登录是防止被暴力破解最有效的手段，一般云服务器都提供了ssh密钥的生成界面，按照参考操作即可。")]),s._v(" "),a("h2",{attrs:{id:"_3-禁止root-ssh-启用普通用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-禁止root-ssh-启用普通用户"}},[s._v("#")]),s._v(" 3.禁止root ssh，启用普通用户")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建普通用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" xxx\npassswd xxx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#生成登录密钥,为保障安全私钥不建议网络传输，所以生成密钥建议在本机操作，然后通过网络把公钥传输到云主机")]),s._v("\nssh-keygen -N "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" -f ~/.ssh/xxxkey_rsa\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将上述命令生成的~/.ssh/yolrekey_rsa.pub文件拷贝到服务器，并执行以下命令配置好密钥登录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/yolre/.ssh\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /tmp/xxxkey_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /home/xxx/.ssh/authorized_keys\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R xxx:xxx /home/xxx/.ssh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" /home/xxx/.ssh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" /home/xxx/.ssh/authorized_keys\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用以下命令登录服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -i ~/.ssh/xxxkey_rsa -p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("端口号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" xxx@ip\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果可成功登录，则说明密钥登录配置成功，登录成功后可执行 su root切换至root权限进行操作，便可以禁用root登录了")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n添加：PermitRootLogin no\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h2",{attrs:{id:"_4-云防火墙定期检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-云防火墙定期检查"}},[s._v("#")]),s._v(" 4.云防火墙定期检查")]),s._v(" "),a("p",[s._v("由于个人用户一般不具有固定ip，所以没办法设置ip白名单，不过个人宽带ip虽然定期再变，但是一般处于一个网络段范围。"),a("br"),s._v("\n建议个人用户仍然设置ip地址段白名单。"),a("br"),s._v("\n云厂商一般提供防范措施，能够看到有谁再扫描我们服务器，建议定期将这些ip添加到防火墙。")])])}),[],!1,null,null,null);n.default=e.exports}}]);